<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Aria Kajeh, Evan Ji, Yujie Li, William Long">

<title>Bootstrapping with Linear Regression Vignette</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="BootStrapping-LinearRegression-Vignette_files/libs/clipboard/clipboard.min.js"></script>
<script src="BootStrapping-LinearRegression-Vignette_files/libs/quarto-html/quarto.js"></script>
<script src="BootStrapping-LinearRegression-Vignette_files/libs/quarto-html/popper.min.js"></script>
<script src="BootStrapping-LinearRegression-Vignette_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="BootStrapping-LinearRegression-Vignette_files/libs/quarto-html/anchor.min.js"></script>
<link href="BootStrapping-LinearRegression-Vignette_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="BootStrapping-LinearRegression-Vignette_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="BootStrapping-LinearRegression-Vignette_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="BootStrapping-LinearRegression-Vignette_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="BootStrapping-LinearRegression-Vignette_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Bootstrapping with Linear Regression Vignette</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Aria Kajeh, Evan Ji, Yujie Li, William Long </p>
          </div>
  </div>
    
    
  </div>
  

</header>

<section id="bootstrapping-overview" class="level1">
<h1>Bootstrapping Overview</h1>
<p>Derived from the root word “bootstrap” and defined by Oxford Dictionary as a verb for getting into or out of a situation using existing resources, bootstrapping in data science carries a similar self sufficient meaning. Bootstrapping is a tool that can be applied to almost any data set in order to construct confidence intervals, calculate standard error, and perform hypothesis testing on numerous different sample statistics. Bootstrapping is self sufficient in that it “utilizes its existing resources” by resampling a provided original data set with replacement numerous times(up to thousands) to create numerous new resampled data sets of the same size as the original data set. Once these simulated data sets are gathered, the sample statistics across all newly resampled data sets are compared and analyzed as the new sampling distribution, providing more valuable data that is more representative of the population the sample was initially gathered from. Creating summary statistics and data that is much more representative of the analyzed population allows for the impressions and predictions made from this data set to be of higher validity than those based merely on the smaller original sample, boosting confidence in predictions.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blogs.sas.com/content/iml/files/2018/12/bootstrapSummary.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure 1: Diagram displaying the stages of bootstrapping</figcaption><p></p>
</figure>
</div>
</section>
<section id="why-bootstrap" class="level1">
<h1>Why Bootstrap?</h1>
<p>Bootstrapping is desirable in many situations as its resampling can be used to assist in providing better data through estimation of possible sampling distributions, better validating any predictions made. For instance, when stuck with a small data set, as data scientists, we are weary of how well it is able to represent the entire population of which it is a subset of. Samples and their distributions vary each time they are taken, but through bootstrapping’s high quantity resampling with replacement, sample statistics are able to be taken from each newly made data set and compared across the other newly created data sets to form overarching sample distributions that can have confidence intervals or other hypothesis testing constructed from.</p>
</section>
<section id="non-parametric-bootstrapping" class="level1">
<h1>Non-parametric Bootstrapping</h1>
<p>There are two main types of bootstrapping, parametric and non-parametric. Non-parametric bootstrapping is the more simplistic core of bootstrapping and makes no assumption on the distribution of the provided sample and its observations. It resamples randomly, with each observation in the sample having an equal probability of being selected, pulling observations with replacement until new samples of the same size are created. Non-parametric bootstrapping is an effective method, however, can be problematic when used on extremely small data sets that may contain trends not present in the overarching population. Parametric on the other end is slightly more advanced in that it resamples the original sample data with a predetermined distribution function with parameters that are estimated the random sample.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yashuseth.files.wordpress.com/2017/12/bootstrap.png?w=1174&amp;h=542" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure 2: Notice the randomization of N observations within each resample compared to the original sample</figcaption><p></p>
</figure>
</div>
</section>
<section id="application-with-horse-racing-data" class="level1">
<h1>Application with Horse Racing data</h1>
<p>First install the boot package. Run the below code in your console.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages('boot')</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">'boot'</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">'dplyr'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">'ggplot2'</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">'ggpubr'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#preprocessing</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#we are subsetting the original, randomly selecting only 1000 of the 79,446 observations to show the benefits of bootstrapping.</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>runsdata <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'../data/raw/runs.csv'</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>weightestimate <span class="ot">&lt;-</span> runsdata <span class="sc">%&gt;%</span> <span class="fu">select</span>(horse_age,declared_weight,actual_weight,finish_time,horse_id) <span class="sc">%&gt;%</span> <span class="fu">sample_n</span>(<span class="dv">7000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us take a look at the most basic use of bootstrapping. As it is a resampling method, bootstrapping allows us to create confidence intervals of summary statistics. Let us take a look at this in the context of declared weights in our data.</p>
<p>First we must create a function, this will tell the bootstrapping method what statistic we are interested in. For our demonstration purposes, we will keep it simple and choose mean as our statistic of interest. Feel free to change the statistics however, with cor(),sd() or any other statistic. You can also change, the variable that is being examined between, horse_age,declared_weight,actual_weight,finish_time and horse_id. (If you choose horse_id you will probably see the greatest range in the confidence interval)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>functionmean <span class="ot">&lt;-</span> <span class="cf">function</span>(data,i){</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  dataframe1<span class="ot">&lt;-</span>data[i,] <span class="co">#this step is used for indexing row</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">mean</span>(dataframe1<span class="sc">$</span>declared_weight))</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now let us apply the boot function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>declared_weight_bootstrapmean<span class="ot">&lt;-</span><span class="fu">boot</span>(weightestimate,functionmean,<span class="at">R=</span><span class="dv">1000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The basic boot function takes 3 arguments. The first is the data, then the function of the statistic, and R is the number of resample or repetitions (generally 1000 resamples is a good number). For further documentation, go to <a href="https://www.rdocumentation.org/packages/boot/versions/1.3-28/topics/boot" class="uri">https://www.rdocumentation.org/packages/boot/versions/1.3-28/topics/boot</a> .</p>
<p>Let us explore the object which is created with the boot function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>declared_weight_bootstrapmean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
ORDINARY NONPARAMETRIC BOOTSTRAP


Call:
boot(data = weightestimate, statistic = functionmean, R = 1000)


Bootstrap Statistics :
    original     bias    std. error
t1* 1104.641 0.01529744   0.7604029</code></pre>
</div>
</div>
<p>You will find that t is a list of the sample statistics generated by resampling. Let us take a look at the histogram of t. With the red line representing the mean of the sampling distribution and the blue line representing the actual mean of the population.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>popmean<span class="ot">&lt;-</span><span class="fu">mean</span>(runsdata<span class="sc">$</span>declared_weight)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>df<span class="ot">&lt;-</span><span class="fu">data.frame</span>(declared_weight_bootstrapmean<span class="sc">$</span>t)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>histogramdec_weight<span class="ot">&lt;-</span><span class="fu">ggplot</span>(df,<span class="fu">aes</span>(declared_weight_bootstrapmean.t))<span class="sc">+</span><span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y=</span>..density..),<span class="at">color=</span><span class="st">'black'</span>,<span class="at">fill=</span><span class="st">'pink'</span>)<span class="sc">+</span><span class="fu">geom_density</span>(<span class="at">fill=</span><span class="st">'blue'</span>,<span class="at">alpha=</span><span class="fl">0.4</span>)<span class="sc">+</span><span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept=</span><span class="fu">mean</span>(declared_weight_bootstrapmean.t)),<span class="at">color =</span><span class="st">'red'</span>, <span class="at">linetype =</span> <span class="st">'dashed'</span>, <span class="at">size =</span><span class="dv">1</span>)<span class="sc">+</span><span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept=</span>popmean),<span class="at">color =</span><span class="st">'blue'</span>, <span class="at">linetype =</span> <span class="st">'solid'</span>, <span class="at">size =</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.</code></pre>
</div>
</div>
<p>Now let us compare the sample distribution more as replication increases and decreases.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>declared_weight_bootstrapmeanrepsmore<span class="ot">&lt;-</span><span class="fu">boot</span>(weightestimate,functionmean,<span class="at">R=</span><span class="dv">10000</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>df1<span class="ot">&lt;-</span><span class="fu">data.frame</span>(declared_weight_bootstrapmeanrepsmore<span class="sc">$</span>t)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>histogramdec_weightrepsmore<span class="ot">&lt;-</span><span class="fu">ggplot</span>(df1,<span class="fu">aes</span>(declared_weight_bootstrapmeanrepsmore.t))<span class="sc">+</span><span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y=</span>..density..),<span class="at">color=</span><span class="st">'black'</span>,<span class="at">fill=</span><span class="st">'pink'</span>)<span class="sc">+</span><span class="fu">geom_density</span>(<span class="at">fill=</span><span class="st">'blue'</span>,<span class="at">alpha=</span><span class="fl">0.4</span>)<span class="sc">+</span><span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept=</span><span class="fu">mean</span>(declared_weight_bootstrapmeanrepsmore.t)),<span class="at">color =</span><span class="st">'red'</span>, <span class="at">linetype =</span> <span class="st">'dashed'</span>, <span class="at">size =</span><span class="dv">1</span>)<span class="sc">+</span><span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept=</span>popmean),<span class="at">color =</span><span class="st">'blue'</span>, <span class="at">linetype =</span> <span class="st">'solid'</span>, <span class="at">size =</span><span class="dv">1</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>declared_weight_bootstrapmeanrepsless<span class="ot">&lt;-</span><span class="fu">boot</span>(weightestimate,functionmean,<span class="at">R=</span><span class="dv">100</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>df2<span class="ot">&lt;-</span><span class="fu">data.frame</span>(declared_weight_bootstrapmeanrepsless<span class="sc">$</span>t)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>histogramdec_weightrepsless<span class="ot">&lt;-</span><span class="fu">ggplot</span>(df2,<span class="fu">aes</span>(declared_weight_bootstrapmeanrepsless.t))<span class="sc">+</span><span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y=</span>..density..),<span class="at">color=</span><span class="st">'black'</span>,<span class="at">fill=</span><span class="st">'pink'</span>)<span class="sc">+</span><span class="fu">geom_density</span>(<span class="at">fill=</span><span class="st">'blue'</span>,<span class="at">alpha=</span><span class="fl">0.4</span>)<span class="sc">+</span><span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept=</span><span class="fu">mean</span>(declared_weight_bootstrapmeanrepsless.t)),<span class="at">color =</span><span class="st">'red'</span>, <span class="at">linetype =</span> <span class="st">'dashed'</span>, <span class="at">size =</span><span class="dv">1</span>)<span class="sc">+</span><span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept=</span>popmean),<span class="at">color =</span><span class="st">'blue'</span>, <span class="at">linetype =</span> <span class="st">'solid'</span>, <span class="at">size =</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>figure1 <span class="ot">&lt;-</span> <span class="fu">ggarrange</span>(histogramdec_weightrepsless,histogramdec_weight,histogramdec_weightrepsmore,<span class="at">ncol=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The dot-dot notation (`..density..`) was deprecated in ggplot2 3.4.0.
ℹ Please use `after_stat(density)` instead.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>figure1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="BootStrapping-LinearRegression-Vignette_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Although just barely you will find that as the number of replications increases the sampling distribution begins to look more and more normal. And although it is hard to tell the mean of the distribution of samples is approaching the population mean as it increases. (Note: There are diminishing returns and bootstrapping as you may have noticed is resource intensive)</p>
<p>You will also find that there are other parameters that the boot function can take, such as strata, stype, sim, and weights. We will focus on sim, specifically the ‘parametric’ value. The default of the boot function is to run a nonparametric bootstrap. Let us try different values for sim. (Note: Do not run a parametric bootstrap, it requires a distribution function not covered in this vignette.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>declared_weight_balbootstrapmean<span class="ot">&lt;-</span><span class="fu">boot</span>(weightestimate,functionmean,<span class="at">R=</span><span class="dv">1000</span>,<span class="at">sim=</span><span class="st">'balanced'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The balanced boostrap ensures that each observation occurs exactly R times across the union set of all resamples which means that each observation will affect the statistic exactly the same.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>declared_weight_bootstrapmean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
ORDINARY NONPARAMETRIC BOOTSTRAP


Call:
boot(data = weightestimate, statistic = functionmean, R = 1000)


Bootstrap Statistics :
    original     bias    std. error
t1* 1104.641 0.01529744   0.7604029</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>declared_weight_balbootstrapmean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
BALANCED BOOTSTRAP


Call:
boot(data = weightestimate, statistic = functionmean, R = 1000, 
    sim = "balanced")


Bootstrap Statistics :
    original  bias    std. error
t1* 1104.641       0   0.7300154</code></pre>
</div>
</div>
</section>
<section id="bootstrapping-in-the-context-of-linear-regression" class="level1">
<h1>Bootstrapping in the context of Linear Regression</h1>
<p>We can also use bootstrapping to estimate the model coefficients for linear regression We build a logistic regression model to predict whether a horse will win in a race, using age, rating, declared weight, actual weight, and draw as predictors.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>origin<span class="ot">=</span><span class="fu">read.csv</span>(<span class="st">"../data/raw/runs.csv"</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"../scripts/data_cleaning.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
✔ tibble  3.1.8     ✔ purrr   0.3.4
✔ tidyr   1.2.1     ✔ stringr 1.4.1
✔ readr   2.1.2     ✔ forcats 0.5.2
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>data<span class="ot">=</span><span class="fu">preprocessing</span>(<span class="dv">500</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Similar to the basic use of bootstrapping for sample statistics, we need to first create a function for the statistics that we are interested in. Since we are interested in whether a horse can win in the race, the response variable is binary, we use glm() function with parameter family = “binomial”to do a logistic regression. The other difference should be changing the returns for the function to be the coefficients of each fits.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>bs <span class="ot">&lt;-</span> <span class="cf">function</span>(formula, data, indices) {</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  d <span class="ot">&lt;-</span> data[indices,] <span class="co"># allows boot to select sample</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  fit <span class="ot">&lt;-</span> <span class="fu">glm</span>(formula, <span class="at">data=</span>d,<span class="at">family =</span> <span class="st">"binomial"</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">coef</span>(fit))</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Try to re-sample for 10000 times and 100 times to see the influence of replication.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>results_10000 <span class="ot">&lt;-</span> <span class="fu">boot</span>(<span class="at">data=</span>data, <span class="at">statistic=</span>bs,</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">R=</span><span class="dv">10000</span>, <span class="at">formula=</span>won<span class="sc">~</span>horse_age<span class="sc">+</span>horse_rating<span class="sc">+</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>                declared_weight<span class="sc">+</span> actual_weight<span class="sc">+</span>draw)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>results_10000</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
ORDINARY NONPARAMETRIC BOOTSTRAP


Call:
boot(data = data, statistic = bs, R = 10000, formula = won ~ 
    horse_age + horse_rating + declared_weight + actual_weight + 
        draw)


Bootstrap Statistics :
         original        bias    std. error
t1* -11.362701155 -2.819865e-01 4.887141402
t2*  -0.155413286 -1.140946e-01 0.415708741
t3*   0.009105081  1.059207e-03 0.012840851
t4*  -0.002210370 -6.981115e-05 0.003002803
t5*   0.092211604  4.708138e-03 0.029873756
t6*  -0.027945249 -8.397178e-04 0.044704471</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>results_100 <span class="ot">&lt;-</span> <span class="fu">boot</span>(<span class="at">data=</span>data, <span class="at">statistic=</span>bs,</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">R=</span><span class="dv">100</span>, <span class="at">formula=</span>won<span class="sc">~</span>horse_age<span class="sc">+</span>horse_rating<span class="sc">+</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>                declared_weight<span class="sc">+</span> actual_weight<span class="sc">+</span>draw)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>results_100</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
ORDINARY NONPARAMETRIC BOOTSTRAP


Call:
boot(data = data, statistic = bs, R = 100, formula = won ~ horse_age + 
    horse_rating + declared_weight + actual_weight + draw)


Bootstrap Statistics :
         original        bias    std. error
t1* -11.362701155  0.2353486742 5.001799274
t2*  -0.155413286 -0.1116282246 0.397866563
t3*   0.009105081  0.0002866810 0.013530321
t4*  -0.002210370 -0.0009076316 0.002867898
t5*   0.092211604  0.0082335099 0.033657751
t6*  -0.027945249 -0.0040987149 0.045225579</code></pre>
</div>
</div>
<p>Choose some of the parameters to compare, we can generally get the similar results as the previous case. As the resampling times become larger, the distribution tends to be more normal.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span> (<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">3</span>))</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(results_10000, <span class="at">index=</span><span class="dv">1</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="BootStrapping-LinearRegression-Vignette_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(results_100, <span class="at">index=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="BootStrapping-LinearRegression-Vignette_files/figure-html/unnamed-chunk-15-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(results_10000, <span class="at">index=</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="BootStrapping-LinearRegression-Vignette_files/figure-html/unnamed-chunk-15-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(results_100, <span class="at">index=</span><span class="dv">3</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="BootStrapping-LinearRegression-Vignette_files/figure-html/unnamed-chunk-15-4.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>Bootstrapping can be a powerful statistical technique in the right situation. It is invaluable for working with smaller sample sizes of data that are not large enough for straightforward data analysis. It can give crucial insight into the variance and distribution of population statistics, while also making it easier to work with data of an unknown distribution. In the context of regression models, bootstrapping to estimate the variance of regression coefficients gives insight as to how consistent our model is.</p>
<p>Bootstrapping is limited by its central assumption that the original sample chosen represents the population well. If the original sample is not an unbiased subset of the population, then repeatedly sampling subsets of that sample will result in a similarly biased distribution. The amount of processing power needed for bootstrapping can also limit its effectiveness, especially when working with larger bootstrap samples and/or large amounts of resamples.</p>
<p>Refer to our reference list in the README file for further study on bootstrapping.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>